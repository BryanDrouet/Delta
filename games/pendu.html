<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jeu du Pendu Complet</title>
<style>
  body {
    font-family: monospace, monospace;
    white-space: pre;
    background: #f0f0f0;
    padding: 30px;
    text-align: center;
  }
  #hangman-display {
    font-size: 1.5em;
    line-height: 1.2em;
    margin-bottom: 20px;
    color: #333;
  }
  #word-display {
    font-size: 2.5em;
    letter-spacing: 15px;
    margin: 20px 0;
  }
  #virtual-keyboard {
    margin: 20px auto;
    max-width: 600px;
  }
  button.key {
    font-size: 1.3em;
    margin: 5px;
    padding: 10px 15px;
    cursor: pointer;
    border-radius: 5px;
    border: 1px solid #333;
    background-color: #fff;
  }
  button.key:disabled {
    background-color: #ccc;
    cursor: not-allowed;
  }
  #message {
    margin-top: 20px;
    font-size: 1.4em;
    font-weight: bold;
  }
  #restart {
    margin-top: 30px;
    padding: 10px 30px;
    font-size: 1.2em;
  }
</style>
</head>
<body>

<h1>Jeu du Pendu - Mode Complet</h1>

<div id="hangman-display"></div>
<div id="word-display"></div>
<div id="virtual-keyboard"></div>
<div id="message"></div>
<button id="restart" style="display:none;">Recommencer</button>

<script>
  const hangmanStates = [
`__________
|/       |
|
|
|
|
|_______`,
`__________
|/       |
|       ( )
|
|
|
|_______`,
`__________
|/       |
|       ( )
|        |
|
|
|_______`,
`__________
|/       |
|       ( )
|       \\|
|
|
|_______`,
`__________
|/       |
|       ( )
|       \\|/
|
|
|_______`,
`__________
|/       |
|       ( )
|       \\|/
|        |
|
|_______`,
`__________
|/       |
|       ( )
|       \\|/
|        |
|       /
|_______`,
`__________
|/       |
|       ( )
|       \\|/
|        |
|       / \\
|_______`,
`__________
|/       |
|       (x_x)
|       \\|/
|        |
|       / \\
|_______`,
`__________
|/       |
|       (x_x)
|      --|--
|        |
|       / \\
|_______`
  ];

  const maxWrong = hangmanStates.length - 1;

  const secretWord = prompt("Joueur 1, entrez un mot secret en majuscules (A-Z) :").toUpperCase().trim();
  if (!secretWord || !/^[A-Z]+$/.test(secretWord)) {
    alert("Mot invalide, rechargez la page et recommencez.");
    throw new Error("Mot invalide");
  }

  const wordArray = secretWord.split('');
  let guessedWord = Array(secretWord.length).fill('_');
  let wrongGuesses = 0;

  const hangmanDisplay = document.getElementById('hangman-display');
  const wordDisplay = document.getElementById('word-display');
  const keyboardDiv = document.getElementById('virtual-keyboard');
  const messageDiv = document.getElementById('message');
  const restartBtn = document.getElementById('restart');

  function updateDisplay() {
    hangmanDisplay.textContent = hangmanStates[wrongGuesses];
    wordDisplay.textContent = guessedWord.join(' ');
  }

  function handleGuess(letter, button) {
    button.disabled = true;
    if (wordArray.includes(letter)) {
      wordArray.forEach((char, index) => {
        if (char === letter) guessedWord[index] = letter;
      });
      updateDisplay();
      if (!guessedWord.includes('_')) {
        messageDiv.textContent = "ðŸŽ‰ FÃ©licitations, vous avez gagnÃ© !";
        disableAllKeys();
        restartBtn.style.display = 'inline-block';
      }
    } else {
      wrongGuesses++;
      updateDisplay();
      if (wrongGuesses === maxWrong) {
        messageDiv.textContent = `ðŸ’€ Perdu ! Le mot Ã©tait : ${secretWord}`;
        guessedWord = wordArray.slice();
        updateDisplay();
        disableAllKeys();
        restartBtn.style.display = 'inline-block';
      }
    }
  }

  function disableAllKeys() {
    document.querySelectorAll('button.key').forEach(btn => btn.disabled = true);
  }

  function createKeyboard() {
    for(let i = 65; i <= 90; i++) {
      const letter = String.fromCharCode(i);
      const btn = document.createElement('button');
      btn.textContent = letter;
      btn.className = 'key';
      btn.addEventListener('click', () => handleGuess(letter, btn));
      keyboardDiv.appendChild(btn);
    }
  }

  restartBtn.addEventListener('click', () => {
    location.reload();
  });

  // Initialisation
  createKeyboard();
  updateDisplay();
</script>

</body>
</html>
